/*!
 * v-currency-field v3.0.7 
 * (c) 2020 Philipe Augusto <phiny1@gmail.com>
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):(e=e||self,t(e.VCurrencyField={},e.Vue))}(this,function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t){if(null==e)return{};var n,r,i={},u=Object.keys(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function l(e,t){if(null==e)return{};var n,r,i=o(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e){var t=e.locale,r=e.currency;return null==r?x(new Intl.NumberFormat(t,{minimumFractionDigits:2})):"object"===n(r)?Object.assign({},x(new Intl.NumberFormat(t,{minimumFractionDigits:2})),{prefix:r.prefix||"",negativePrefix:"-"+(r.prefix||""),suffix:r.suffix||""}):x(new Intl.NumberFormat(t,{style:"currency",currency:r}))}function c(e,t){void 0===t&&(t={});var n=t.prefix,r=t.suffix,i=t.groupingSymbol,u=t.decimalSymbol;if("number"==typeof e)return e;if(e&&"string"==typeof e){if(N(e))return Number(e);var o=E(e,{prefix:n,suffix:r}),l=o.value,a=o.negative,c=l.split(u);if(c.length>2)return null;var f=c[0].replace(new RegExp("\\"+i,"g"),"");if(f.length&&!f.match(/^\d+$/g))return null;var m=f;if(2===c.length){var s=c[1];if(s.length&&!s.match(/^\d+$/g))return null;m+="."+s}if(m)return a&&(m="-"+m),Number(m)}return null}function f(e,t,n,r){if(void 0===r&&(r=""),"string"==typeof e){if(e=e.trim(),n.autoDecimalMode)return R(e,r,t);var i=E(e,t),u=i.value,o=i.negative,l=I(u,o,r,t);if(null!=l)return{conformedValue:l};var a=u.split(t.decimalSymbol),c=a[0],f=a.slice(1),m=S($(c)),s=$(f.join("")).substr(0,t.decimalLength);if(q(f,s.length))return{conformedValue:r};var d=m;return o&&(d="-"+d),N(d)?{conformedValue:Number(d+"."+s),fractionDigits:s}:"-"===d&&r!==t.negativePrefix?{conformedValue:r}:{conformedValue:""}}return{conformedValue:r}}function m(e,t,n){var r=document.createEvent("CustomEvent");r.initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)}function s(e,t,n,r,i,u,o,l,a,c){"boolean"!=typeof o&&(a=l,l=o,o=!1);var f="function"==typeof n?n.options:n;e&&e.render&&(f.render=e.render,f.staticRenderFns=e.staticRenderFns,f._compiled=!0,i&&(f.functional=!0)),r&&(f._scopeId=r);var m;if(u?(m=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(u)},f._ssrRegister=m):t&&(m=o?function(){t.call(this,c(this.$root.$options.shadowRoot))}:function(e){t.call(this,l(e))}),m)if(f.functional){var s=f.render;f.render=function(e,t){return m.call(t),s(e,t)}}else{var d=f.beforeCreate;f.beforeCreate=d?[].concat(d,m):[m]}return n}function d(e,t){t&&Object.keys(t).map(function(e){B[e]=t[e]}),e.component("v-currency-field",W)}t=t&&t.hasOwnProperty("default")?t.default:t;var g=function(e,t,n){var r=document.createEvent("CustomEvent");r.initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)},p=function(e,t){return e.substring(0,t.length)===t},v=function(e,t){return t&&p(e,t)?e.substr(t.length):e},y=function(e,t){var n=t.prefix,r=t.suffix,i=e.replace(n,"").replace(r,"");return{value:v(i,"-"),negative:p(i,"-")}},b=function(e){return e.match(/^-?\d+(\.\d+)?$/)},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.prefix,r=t.suffix,i=t.groupingSymbol,u=t.decimalSymbol;if("number"==typeof e)return e;if(e&&"string"==typeof e){if(b(e))return Number(e);var o=y(e,{prefix:n,suffix:r}),l=o.value,a=o.negative,c=l.split(u);if(c.length>2)return null;var f=c[0].replace(new RegExp("\\".concat(i),"g"),"");if(f.length&&!f.match(/^\d+$/g))return null;var m=f;if(2===c.length){var s=c[1];if(s.length&&!s.match(/^\d+$/g))return null;m+=".".concat(s)}if(m)return a&&(m="-".concat(m)),Number(m)}return null},x=function(e){var t=e.format(123456),n=e.format(-1),r=(t.match(/0/g)||[]).length,i=r>0?t.substr(t.indexOf("6")+1,1):null;return{prefix:t.substring(0,t.indexOf("1")),negativePrefix:n.substring(0,n.indexOf("1")),suffix:t.substring(t.lastIndexOf(r>0?"0":"6")+1),groupingSymbol:t.substr(t.indexOf("3")+1,1),decimalSymbol:i,decimalLength:r}},S=function(e){return e.replace(/^0+(0$|[^0])/,"$1")},$=function(e){return e.replace(/\D+/g,"")},O=function(e,t){return(e.match(new RegExp("\\"+t,"g"))||[]).length},V=function(e,t){return e.substring(e.length-t.length,e.length)===t},F=function(e,t){return e.substring(0,t.length)===t},w=function(e,t){return t&&F(e,t)?e.substr(t.length):e},D=function(e,t){return t&&V(e,t)?e.slice(0,-1*t.length):e},E=function(e,t){var n=t.prefix,r=t.suffix,i=e.replace(n,"").replace(r,"");return{value:w(i,"-"),negative:F(i,"-")}},N=function(e){return e.match(/^-?\d+(\.\d+)?$/)},C={locale:void 0,currency:"EUR",distractionFree:!0,decimalLength:void 0,autoDecimalMode:!1,min:null,max:null},_=function(e,t){return e.setSelectionRange(t,t)},L=function(e,t,n){var r=e.$ci.currencyFormat,i=r.prefix,u=r.suffix,o=r.decimalSymbol,l=r.decimalLength,a=r.groupingSymbol,c=e.value,f=t.indexOf(o)+1,m=t.length-n;return Math.abs(c.length-t.length)>1&&n<=f?c.indexOf(o)+1:c.substr(n,1)===a&&O(c,a)===O(t,a)+1?c.length-m-1:(!e.$ci.options.autoDecimalMode&&0!==f&&n>f&&$(D(t.substr(f),u)).length-1===l&&(m-=1),e.$ci.options.hideCurrencySymbol?c.length-m:Math.max(c.length-Math.max(m,u.length),0===i.length?0:i.length+1))},j=function(e,t,n,r){var i=e.prefix,u=e.groupingSymbol,o=t.hideCurrencySymbol,l=t.hideGroupingSymbol,a=r;return o&&(a-=i.length),l&&(a-=O(n.substring(0,r),u)),Math.max(0,a)},M=function(e,t){return e.match(new RegExp("^-?(0|[1-9]\\d{0,2}(\\"+t+"?\\d{3})*)$"))},P=function(e,t){var n=t.decimalSymbol,r=t.groupingSymbol,i=e.split(n);return V(e,n)&&2===i.length&&M(i[0],r)},I=function(e,t,n,r){var i=r.prefix,u=r.negativePrefix,o=r.suffix,l=r.decimalSymbol,a=r.decimalLength;if(""===e&&t&&n!==u)return""+u+o;if(a>0){if(P(e,r))return""+(t?u:i)+e+o;if(F(e,l))return(t?u:i)+"0"+l+$(e.substr(1)).substr(0,a)+o}return null},R=function(e,t,n){var r=n.decimalLength;if(""===e)return{conformedValue:""};var i=F(e,"-"),u="-"===e?Number(-0):Number((i?"-":"")+S($(e)))/Math.pow(10,r);return{conformedValue:u,fractionDigits:u.toFixed(r).slice(-r)}},q=function(e,t){return e.length>0&&0===t},k=function(e,t,n){var r="input"===e.tagName.toLowerCase()?e:e.querySelector("input");if(!r)throw new Error("No input element found");var i=Object.assign({},n,t),u=i.min,o=i.max,l=i.decimalLength,c=i.distractionFree,f=i.autoDecimalMode;if(i.hideCurrencySymbol=null==i.currency||!0===c||c.hideCurrencySymbol,i.hideNegligibleDecimalDigits=!f&&(!0===c||c.hideNegligibleDecimalDigits),i.hideGroupingSymbol=!0===c||c.hideGroupingSymbol,null!=u&&null!=o&&u>o)throw new Error("Invalid value range");if(l<0||l>20)throw new Error("Decimal length must be between 0 and 20");var m=a(i);return m.decimalLength>0&&void 0!==l&&(m.decimalLength=l),r.$ci=Object.assign({},r.$ci||{},{options:i,currencyFormat:m,decimalFormat:Object.assign({},m,{prefix:"",negativePrefix:"-",suffix:""})}),r},T=function(e,t){var n=e.$ci,r=n.options,i=r.min,u=r.max,o=r.locale,l=n.currencyFormat.decimalLength;null!=t&&(null!=i&&t<i&&(t=i),null!=u&&t>u&&(t=u),t=new Intl.NumberFormat(o,{minimumFractionDigits:l,maximumFractionDigits:l}).format(t)),U(e,t)},G=function(e,t,n){if(void 0===n&&(n=!1),null!=t){var r=e.$ci,i=r.options,u=r.decimalFormat,o=r.currencyFormat,l=r.focus,a=r.previousConformedValue,m=l&&i.hideCurrencySymbol,s=m?u:o,d=f(t,s,i,a),g=d.conformedValue,p=d.fractionDigits;if("number"==typeof g){var v=new Intl.NumberFormat(i.locale,{useGrouping:!(l&&i.hideGroupingSymbol),minimumFractionDigits:n?i.hideNegligibleDecimalDigits?p.replace(/0+$/,"").length:o.decimalLength:p.length}).format(Math.abs(g)),y=0===g&&1/g<0;e.value=""+(y||g<0?s.negativePrefix:s.prefix)+v+s.suffix,e.$ci.numberValue=g}else e.value=g,e.$ci.numberValue=c(e.value,s)}else e.value=e.$ci.numberValue=null;e.$ci.previousConformedValue=e.value},U=function(e,t){G(e,t),m(e,"format-complete",{numberValue:e.$ci.numberValue})},A=function(e){e.addEventListener("input",function(){var t=e.value,n=e.selectionStart;U(e,t),e.$ci.focus&&_(e,L(e,t,n))},{capture:!0}),e.addEventListener("format",function(t){var n=t.detail;e.$ci.focus||T(e,n.value)}),e.addEventListener("focus",function(){e.$ci.focus=!0;var t=e.$ci,n=t.currencyFormat,r=t.options,i=r.distractionFree,u=r.hideCurrencySymbol,o=r.hideGroupingSymbol,l=r.hideNegligibleDecimalDigits;(!0===i||u||o||l)&&setTimeout(function(){var t=e.value,i=e.selectionStart,u=e.selectionEnd;G(e,e.value,!0),Math.abs(i-u)>0?e.setSelectionRange(0,e.value.length):_(e,j(n,r,t,i))})}),e.addEventListener("blur",function(){e.$ci.focus=!1,T(e,e.$ci.numberValue)})},X={bind:function(e,n,r){var i=n.value,u=r.context,o=k(e,i,u.$CI_DEFAULT_OPTIONS||C);t.nextTick(function(){o.value&&T(o,c(o.value,o.$ci.currencyFormat))}),A(o)},componentUpdated:function(e,t,n){var r=t.value,i=t.oldValue,u=n.context;if(r&&Object.keys(C).some(function(e){return i[e]!==r[e]})){var o=k(e,r,u.$CI_DEFAULT_OPTIONS||C);T(o,o.$ci.numberValue)}}},B={locale:void 0,decimalLength:2,autoDecimalMode:!0,min:null,max:null,defaultValue:0},z={name:"VCurrencyField",props:{value:{type:[Number,String],default:function(){return B.defaultValue}},locale:{type:String,default:function(){return B.locale}},decimalLength:{type:Number,default:function(){return B.decimalLength}},autoDecimalMode:{type:Boolean,default:function(){return B.autoDecimalMode}},min:{type:Number,default:function(){return B.min}},max:{type:Number,default:function(){return B.max}},defaultValue:{type:Number,default:function(){return B.defaultValue}}},directives:{CurrencyDirective:X},data:function(){return{currency:null,formattedValue:this.value}},mounted:function(){this.$refs.textfield.resetValidation()},computed:{attrs:function(){var e=this.$attrs;e.value;return l(e,["value"])},distractionFree:function(){return this.decimalLength>0&&!this.autoDecimalMode},decimalMode:function(){return this.decimalLength>0&&this.autoDecimalMode}},watch:{value:function(e){g(this.$el.querySelector("input"),"format",{value:e})}},methods:{listeners:function(){var e=this,t=this.$listeners;t.input;return u({},l(t,["input"]),{"format-complete":function(t){var n=t.detail;null===n.numberValue&&null!==e.defaultValue&&!1===e.$el.querySelector("input").$ci.focus&&(n.numberValue=e.defaultValue,g(e.$el.querySelector("input"),"format",{value:e.defaultValue})),e.$emit("input",n.numberValue),e.formattedValue=e.$el.querySelector("input").value},keyup:function(t){if("-"===t.key||"+"===t.key){var n=y(e.$el.querySelector("input").value,{prefix:"",suffix:""}),r=n.value,i=n.negative,u=r.split(e.$el.querySelector("input").$ci.currencyFormat.decimalSymbol),o=h(r,e.$el.querySelector("input").$ci.currencyFormat),l=null;if(2===u.length){var a=u[1];l=new Intl.NumberFormat(e.locale,{minimumFractionDigits:a.length,maximumFractionDigits:a.length}).format(o)}var c=l||o;"-"!==t.key||i||null===c||(e.$el.querySelector("input").value="-".concat(c),g(e.$el.querySelector("input"),"input")),"+"===t.key&&i&&null!==c&&(e.$el.querySelector("input").value="".concat(c),g(e.$el.querySelector("input"),"input"))}}})}}},H=s;const J=z;var K=function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-text-field",e._g(e._b({directives:[{name:"currency-directive",rawName:"v-currency-directive",value:{currency:e.currency,locale:e.locale,distractionFree:e.distractionFree,decimalLength:e.decimalLength,autoDecimalMode:e.decimalMode,min:e.min,max:e.max},expression:"{currency, locale, distractionFree, decimalLength, autoDecimalMode: decimalMode, min, max}"}],ref:"textfield",attrs:{type:"tel"},model:{value:e.formattedValue,callback:function(t){e.formattedValue=t},expression:"formattedValue"}},"v-text-field",e.attrs,!1),e.listeners()))},Q=[];var W=H({render:K,staticRenderFns:Q},void 0,J,void 0,!1,void 0,void 0,void 0);"undefined"!=typeof window&&window.Vue&&window.Vue.use(d),e.VCurrencyField=W,e.default=d,e.options=B,e.version="3.0.7",Object.defineProperty(e,"__esModule",{value:!0})});