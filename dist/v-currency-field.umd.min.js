/*!
 * v-currency-field v3.0.5 
 * (c) 2019 Philipe Augusto <phiny1@gmail.com>
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):(e=e||self,t(e.VCurrencyField={},e.Vue))}(this,function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(null==e)return{};var n,r,i={},u=Object.keys(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function i(e,t){if(null==e)return{};var n,i,u=r(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function u(e){var t=e.locale,r=e.currency;return null==r?h(new Intl.NumberFormat(t,{minimumFractionDigits:2})):"object"===n(r)?Object.assign({},h(new Intl.NumberFormat(t,{minimumFractionDigits:2})),{prefix:r.prefix||"",negativePrefix:"-"+(r.prefix||""),suffix:r.suffix||""}):h(new Intl.NumberFormat(t,{style:"currency",currency:r}))}function l(e,t){void 0===t&&(t={});var n=t.prefix,r=t.suffix,i=t.groupingSymbol,u=t.decimalSymbol;if("number"==typeof e)return e;if(e&&"string"==typeof e){if(w(e))return Number(e);var l=D(e,{prefix:n,suffix:r}),o=l.value,a=l.negative,c=o.split(u);if(c.length>2)return null;var f=c[0].replace(new RegExp("\\"+i,"g"),"");if(f.length&&!f.match(/^\d+$/g))return null;var m=f;if(2===c.length){var s=c[1];if(s.length&&!s.match(/^\d+$/g))return null;m+="."+s}if(m)return a&&(m="-"+m),Number(m)}return null}function o(e,t,n,r){if(void 0===r&&(r=""),"string"==typeof e){if(e=e.trim(),n.autoDecimalMode)return j(e,r,t);var i=D(e,t),u=i.value,l=i.negative,o=M(u,l,r,t);if(null!=o)return{conformedValue:o};var a=u.split(t.decimalSymbol),c=a[0],f=a.slice(1),m=y(b(c)),s=b(f.join("")).substr(0,t.decimalLength);if(I(f,s.length))return{conformedValue:r};var d=m;return l&&(d="-"+d),w(d)?{conformedValue:Number(d+"."+s),fractionDigits:s}:"-"===d&&r!==t.negativePrefix?{conformedValue:r}:{conformedValue:""}}return{conformedValue:r}}function a(e,t,n){var r=document.createEvent("CustomEvent");r.initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)}function c(e,t,n,r,i,u,l,o,a,c){"boolean"!=typeof l&&(a=o,o=l,l=!1);var f="function"==typeof n?n.options:n;e&&e.render&&(f.render=e.render,f.staticRenderFns=e.staticRenderFns,f._compiled=!0,i&&(f.functional=!0)),r&&(f._scopeId=r);var m;if(u?(m=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(u)},f._ssrRegister=m):t&&(m=l?function(){t.call(this,c(this.$root.$options.shadowRoot))}:function(e){t.call(this,o(e))}),m)if(f.functional){var s=f.render;f.render=function(e,t){return m.call(t),s(e,t)}}else{var d=f.beforeCreate;f.beforeCreate=d?[].concat(d,m):[m]}return n}function f(e,t){t&&Object.keys(t).map(function(e){U[e]=t[e]}),e.component("v-currency-field",J)}t=t&&t.hasOwnProperty("default")?t.default:t;var m=function(e,t,n){var r=document.createEvent("CustomEvent");r.initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)},s=function(e,t){return e.substring(0,t.length)===t},d=function(e,t){return t&&s(e,t)?e.substr(t.length):e},g=function(e,t){var n=t.prefix,r=t.suffix,i=e.replace(n,"").replace(r,"");return{value:d(i,"-"),negative:s(i,"-")}},v=function(e){return e.match(/^-?\d+(\.\d+)?$/)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.prefix,r=t.suffix,i=t.groupingSymbol,u=t.decimalSymbol;if("number"==typeof e)return e;if(e&&"string"==typeof e){if(v(e))return Number(e);var l=g(e,{prefix:n,suffix:r}),o=l.value,a=l.negative,c=o.split(u);if(c.length>2)return null;var f=c[0].replace(new RegExp("\\".concat(i),"g"),"");if(f.length&&!f.match(/^\d+$/g))return null;var m=f;if(2===c.length){var s=c[1];if(s.length&&!s.match(/^\d+$/g))return null;m+=".".concat(s)}if(m)return a&&(m="-".concat(m)),Number(m)}return null},h=function(e){var t=e.format(123456),n=e.format(-1),r=(t.match(/0/g)||[]).length,i=r>0?t.substr(t.indexOf("6")+1,1):null;return{prefix:t.substring(0,t.indexOf("1")),negativePrefix:n.substring(0,n.indexOf("1")),suffix:t.substring(t.lastIndexOf(r>0?"0":"6")+1),groupingSymbol:t.substr(t.indexOf("3")+1,1),decimalSymbol:i,decimalLength:r}},y=function(e){return e.replace(/^0+(0$|[^0])/,"$1")},b=function(e){return e.replace(/\D+/g,"")},x=function(e,t){return(e.match(new RegExp("\\"+t,"g"))||[]).length},S=function(e,t){return e.substring(e.length-t.length,e.length)===t},$=function(e,t){return e.substring(0,t.length)===t},V=function(e,t){return t&&$(e,t)?e.substr(t.length):e},F=function(e,t){return t&&S(e,t)?e.slice(0,-1*t.length):e},D=function(e,t){var n=t.prefix,r=t.suffix,i=e.replace(n,"").replace(r,"");return{value:V(i,"-"),negative:$(i,"-")}},w=function(e){return e.match(/^-?\d+(\.\d+)?$/)},E={locale:void 0,currency:"EUR",distractionFree:!0,decimalLength:void 0,autoDecimalMode:!1,min:null,max:null},N=function(e,t){return e.setSelectionRange(t,t)},O=function(e,t,n){var r=e.$ci.currencyFormat,i=r.prefix,u=r.suffix,l=r.decimalSymbol,o=r.decimalLength,a=r.groupingSymbol,c=e.value,f=t.indexOf(l)+1,m=t.length-n;return Math.abs(c.length-t.length)>1&&n<=f?c.indexOf(l)+1:c.substr(n,1)===a&&x(c,a)===x(t,a)+1?c.length-m-1:(!e.$ci.options.autoDecimalMode&&0!==f&&n>f&&b(F(t.substr(f),u)).length-1===o&&(m-=1),e.$ci.options.hideCurrencySymbol?c.length-m:Math.max(c.length-Math.max(m,u.length),0===i.length?0:i.length+1))},C=function(e,t,n,r){var i=e.prefix,u=e.groupingSymbol,l=t.hideCurrencySymbol,o=t.hideGroupingSymbol,a=r;return l&&(a-=i.length),o&&(a-=x(n.substring(0,r),u)),Math.max(0,a)},_=function(e,t){return e.match(new RegExp("^-?(0|[1-9]\\d{0,2}(\\"+t+"?\\d{3})*)$"))},L=function(e,t){var n=t.decimalSymbol,r=t.groupingSymbol,i=e.split(n);return S(e,n)&&2===i.length&&_(i[0],r)},M=function(e,t,n,r){var i=r.prefix,u=r.negativePrefix,l=r.suffix,o=r.decimalSymbol,a=r.decimalLength;if(""===e&&t&&n!==u)return""+u+l;if(a>0){if(L(e,r))return""+(t?u:i)+e+l;if($(e,o))return(t?u:i)+"0"+o+b(e.substr(1)).substr(0,a)+l}return null},j=function(e,t,n){var r=n.decimalLength;if(""===e)return{conformedValue:""};var i=$(e,"-"),u="-"===e?Number(-0):Number((i?"-":"")+y(b(e)))/Math.pow(10,r);return{conformedValue:u,fractionDigits:u.toFixed(r).slice(-r)}},I=function(e,t){return e.length>0&&0===t},R=function(e,t,n){var r="input"===e.tagName.toLowerCase()?e:e.querySelector("input");if(!r)throw new Error("No input element found");var i=Object.assign({},n,t),l=i.min,o=i.max,a=i.decimalLength,c=i.distractionFree,f=i.autoDecimalMode;if(i.hideCurrencySymbol=null==i.currency||!0===c||c.hideCurrencySymbol,i.hideNegligibleDecimalDigits=!f&&(!0===c||c.hideNegligibleDecimalDigits),i.hideGroupingSymbol=!0===c||c.hideGroupingSymbol,null!=l&&null!=o&&l>o)throw new Error("Invalid value range");if(a<0||a>20)throw new Error("Decimal length must be between 0 and 20");var m=u(i);return m.decimalLength>0&&void 0!==a&&(m.decimalLength=a),r.$ci=Object.assign({},r.$ci||{},{options:i,currencyFormat:m,decimalFormat:Object.assign({},m,{prefix:"",negativePrefix:"-",suffix:""})}),r},q=function(e,t){var n=e.$ci,r=n.options,i=r.min,u=r.max,l=r.locale,o=n.currencyFormat.decimalLength;null!=t&&(null!=i&&t<i&&(t=i),null!=u&&t>u&&(t=u),t=new Intl.NumberFormat(l,{minimumFractionDigits:o,maximumFractionDigits:o}).format(t)),k(e,t)},P=function(e,t,n){if(void 0===n&&(n=!1),null!=t){var r=e.$ci,i=r.options,u=r.decimalFormat,a=r.currencyFormat,c=r.focus,f=r.previousConformedValue,m=c&&i.hideCurrencySymbol,s=m?u:a,d=o(t,s,i,f),g=d.conformedValue,v=d.fractionDigits;if("number"==typeof g){var p=new Intl.NumberFormat(i.locale,{useGrouping:!(c&&i.hideGroupingSymbol),minimumFractionDigits:n?i.hideNegligibleDecimalDigits?v.replace(/0+$/,"").length:a.decimalLength:v.length}).format(Math.abs(g)),h=0===g&&1/g<0;e.value=""+(h||g<0?s.negativePrefix:s.prefix)+p+s.suffix,e.$ci.numberValue=g}else e.value=g,e.$ci.numberValue=l(e.value,s)}else e.value=e.$ci.numberValue=null;e.$ci.previousConformedValue=e.value},k=function(e,t){P(e,t),a(e,"format-complete",{numberValue:e.$ci.numberValue})},T=function(e){e.addEventListener("input",function(){var t=e.value,n=e.selectionStart;k(e,t),e.$ci.focus&&N(e,O(e,t,n))},{capture:!0}),e.addEventListener("format",function(t){var n=t.detail;e.$ci.focus||q(e,n.value)}),e.addEventListener("focus",function(){e.$ci.focus=!0;var t=e.$ci,n=t.currencyFormat,r=t.options,i=r.distractionFree,u=r.hideCurrencySymbol,l=r.hideGroupingSymbol,o=r.hideNegligibleDecimalDigits;(!0===i||u||l||o)&&setTimeout(function(){var t=e.value,i=e.selectionStart,u=e.selectionEnd;P(e,e.value,!0),Math.abs(i-u)>0?e.setSelectionRange(0,e.value.length):N(e,C(n,r,t,i))})}),e.addEventListener("blur",function(){e.$ci.focus=!1,q(e,e.$ci.numberValue)})},G={bind:function(e,n,r){var i=n.value,u=r.context,o=R(e,i,u.$CI_DEFAULT_OPTIONS||E);t.nextTick(function(){o.value&&q(o,l(o.value,o.$ci.currencyFormat))}),T(o)},componentUpdated:function(e,t,n){var r=t.value,i=t.oldValue,u=n.context;if(r&&Object.keys(E).some(function(e){return i[e]!==r[e]})){var l=R(e,r,u.$CI_DEFAULT_OPTIONS||E);q(l,l.$ci.numberValue)}}},U={locale:void 0,decimalLength:2,autoDecimalMode:!0,min:null,max:null,defaultValue:0},A={name:"VCurrencyField",props:{value:{type:[Number,String],default:function(){return U.defaultValue}},locale:{type:String,default:function(){return U.locale}},decimalLength:{type:Number,default:function(){return U.decimalLength}},autoDecimalMode:{type:Boolean,default:function(){return U.autoDecimalMode}},min:{type:Number,default:function(){return U.min}},max:{type:Number,default:function(){return U.max}},defaultValue:{type:Number,default:function(){return U.defaultValue}}},directives:{CurrencyDirective:G},data:function(){return{currency:null,formattedValue:this.value}},computed:{attrs:function(){var e=this.$attrs;e.value;return i(e,["value"])},distractionFree:function(){return this.decimalLength>0&&!this.autoDecimalMode},decimalMode:function(){return this.decimalLength>0&&this.autoDecimalMode}},watch:{value:function(e){m(this.$el.querySelector("input"),"format",{value:e})}},methods:{listeners:function(){var e=this,t=this.$listeners;t.input;return{listeners:i(t,["input"]),"format-complete":function(t){var n=t.detail;null===n.numberValue&&null!==e.defaultValue&&!1===e.$el.querySelector("input").$ci.focus&&(n.numberValue=e.defaultValue,m(e.$el.querySelector("input"),"format",{value:e.defaultValue})),e.$emit("input",n.numberValue),e.formattedValue=e.$el.querySelector("input").value},keyup:function(t){if("-"===t.key||"+"===t.key){var n=g(e.$el.querySelector("input").value,{prefix:"",suffix:""}),r=n.value,i=n.negative,u=r.split(e.$el.querySelector("input").$ci.currencyFormat.decimalSymbol),l=p(r,e.$el.querySelector("input").$ci.currencyFormat),o=null;if(2===u.length){var a=u[1];o=new Intl.NumberFormat(e.locale,{minimumFractionDigits:a.length,maximumFractionDigits:a.length}).format(l)}var c=o||l;"-"!==t.key||i||null===c||(e.$el.querySelector("input").value="-".concat(c),m(e.$el.querySelector("input"),"input")),"+"===t.key&&i&&null!==c&&(e.$el.querySelector("input").value="".concat(c),m(e.$el.querySelector("input"),"input"))}}}}}},X=c;const B=A;var z=function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-text-field",e._g(e._b({directives:[{name:"currency-directive",rawName:"v-currency-directive",value:{currency:e.currency,locale:e.locale,distractionFree:e.distractionFree,decimalLength:e.decimalLength,autoDecimalMode:e.decimalMode,min:e.min,max:e.max},expression:"{currency, locale, distractionFree, decimalLength, autoDecimalMode: decimalMode, min, max}"}],ref:"textfield",attrs:{type:"tel"},model:{value:e.formattedValue,callback:function(t){e.formattedValue=t},expression:"formattedValue"}},"v-text-field",e.attrs,!1),e.listeners()))},H=[];var J=X({render:z,staticRenderFns:H},void 0,B,void 0,!1,void 0,void 0,void 0);"undefined"!=typeof window&&window.Vue&&window.Vue.use(f),e.VCurrencyField=J,e.default=f,e.options=U,e.version="3.0.5",Object.defineProperty(e,"__esModule",{value:!0})});